# Webhooks

Webhook是一种用于将NetBox中发生的更改传达给某些外部系统的机制。例如，您可能希望在NetBox中更新设备的状态时通知监控系统。这可以通过在NetBox中为设备模型创建Webhook并标识Webhook接收器来完成。当NetBox检测到设备的更改时，将向指定的接收器发送包含更改详细信息和执行更改的人的HTTP请求。

有关更多信息，请参阅[Webhook文档](../../integrations/webhooks.md)。

## 字段

### 名称

唯一的人类友好名称。

### 内容类型

将触发Webhook的NetBox对象类型。

### 启用

如果未选中，Webhook将处于非活动状态。

### 事件

将触发Webhook的事件。必须至少选择一种事件类型。

| 名称        | 描述                             |
|-------------|----------------------------------|
| 创建        | 创建了一个新对象                 |
| 更新        | 修改了现有对象                   |
| 删除        | 删除了一个对象                   |
| 作业开始    | 为一个对象启动了一个作业           |
| 作业结束    | 为一个对象结束了一个作业           |

### URL

Webhook HTTP请求将发送到的URL。

### HTTP方法

要发送的HTTP请求的类型。选项包括：

* `GET`
* `POST`
* `PUT`
* `PATCH`
* `DELETE`

### HTTP内容类型

在出站HTTP请求标头中指示的内容类型。参考[此列表](https://www.iana.org/assignments/media-types/media-types.xhtml)以获取已知类型。

### 附加标头

要包括在出站HTTP请求中的任何附加标头。应以`名称: 值`的格式定义，每个标头占一行。此字段支持Jinja2模板。

### 主体模板

自定义请求主体的Jinja2模板（如果需要）。如果未定义，NetBox将使用Webhook上下文的原始转储来填充请求主体。

### 密钥

用于证明请求的真实性的秘密字符串（可选）。这将附加一个`X-Hook-Signature`标头到请求中，该标头由使用密钥作为密钥对请求主体进行的HMAC（SHA-512）十六进制摘要组成。

### 条件

对触发对象进行评估的一组[规定条件](../../reference/conditions.md)。如果对象定义了条件但未满足条件，则不会发送Webhook。未定义任何条件的Webhook将始终触发。

### SSL验证

控制在使用HTTPS时是否强制执行接收者的SSL证书验证。

!!! warning
    禁用此功能可能会将您的Webhook暴露给中间人攻击。

### CA文件路径

在验证接收者的SSL证书时使用的特定证书颁发机构（CA）文件的文件路径（如果未使用系统默认值）。

## 上下文数据

以下上下文变量可用于文本和链接模板。

| 变量        | 描述                                        |
|-------------|---------------------------------------------|
| `event`     | 事件类型（`create`、`update`或`delete`）    |
| `timestamp` | 事件发生的时间                              |
| `model`     | 受影响对象的类型                            |
| `username`  | 与更改相关联的用户的名称                    |
| `request_id`| 唯一请求ID                                  |
| `data`      | 对象的完整序列化表示                        |
| `snapshots` | 对象的更改前和更改后的快照                 |
